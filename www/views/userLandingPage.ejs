<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css"
        integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Kumbh Sans', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: #141414;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header.navbar {
            background: #131313;
            height: 80px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
            position: sticky;
            top: 0;
            z-index: 999;
            width: 100%;
            padding: 0 50px;
        }

        #navbar__logo {
            background-color: #ff8177;
            background-image: linear-gradient(to top, #ff0844 0%, #ffb199 100%);
            background-size: 100%;
            -webkit-background-clip: text;
            -moz-background-clip: text;
            -webkit-text-fill-color: transparent;
            -moz-text-fill-color: transparent;
            cursor: pointer;
            text-decoration: none;
            font-size: 2rem;
        }

        .navbar__links {
            display: flex;
            align-items: center;
            list-style: none;
            text-align: center;
        }

        .navbar__links a {
            color: #fff;
            text-decoration: none;
            padding: 0 1rem;
            height: 100%;
            display: flex;
            align-items: center;
        }

        .navbar__links .button {
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            padding: 15px;
            border: none;
            outline: none;
            border-radius: 4px;
            background: #f77062;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }

        .button:hover {
            background: #4837ff;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 1200px;
            margin-top: 80px;
            padding: 20px;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .welcome-heading {
            font-size: 2.5rem;
            color: #f77062;
            margin-bottom: 10px;
        }

        .welcome-message {
            font-size: 1.2rem;
            color: #888;
            line-height: 1.6;
        }

        .card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            width: 100%;
            margin-top: 20px;
        }

        .card {
            width: 30%;
            padding: 20px;
            box-sizing: border-box;
            background-color: #2a2a2a;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            transition: box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .card h2 {
            margin-bottom: 10px;
            color: #fff;
        }

        .card p {
            color: #888;
            margin-bottom: 10px;
        }

        .card-button {
            margin-top: auto;
        }

        .button {
            margin-top: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            padding: 15px;
            width: 100%;
            border: none;
            outline: none;
            border-radius: 4px;
            background: #f77062;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }

        .button:hover {
            background: #4837ff;
        }

        .profile-link {
            display: flex;
            align-items: center;
            color: #fff;
            text-decoration: none;
            height: 100%;
            padding: 0 1rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .profile-link a i {
            margin-right: 10px;
            font-size: 2rem;
            color: #f77062;
        }

        .profile-link a i:hover {
            color:  #4837ff ;
            color:white;
        }


     @media only screen and (max-width: 800px){
         .card-container{
             flex-direction:column;
             align-items:center;
             min-width:600px;
         }
         .welcome-section{
             max-width:400px;
         }
         .welcome-heading{
             max-width:350px;
             font-size:1.4rem;
         }
         .welcome-message{
             
             font-size:1rem;
             margin-left:10px;
             max-width:350px;
             
         }
         .container{
             display:flex;
             justify-content:center;
             align-items:center;
             max-width:750px;
         }
         select{
             text-align:center;
         }
         .navbar{
             flex-direction:column;
             min-height:100px;
         }
         
     }
    </style>
    <script src="https://kit.fontawesome.com/91d952eaf3.js" crossorigin="anonymous"></script>
    <script>
     function changeProp(){
         let select = document.getElementById("groupnames").value;
         let link = document.getElementById("link").href=`/group/${select}`;
     }
     
    </script>
</head>

<body>

    <header class="navbar">
        <a href="/" id="navbar__logo"><i class="fas fa-gem"></i>TTRPGs</a>
        <div class="navbar__links">
           
            <div class="profile-link">
                <a href="/search"><i style="font-size:2rem" class="fa-solid fa-magnifying-glass"></i></a>
                <a href="/sendmessage"><i style="font-size:2rem" class="fas fa-message"></i></a>
                <a href="/userprofile"><i style="font-size:2rem" class="fas fa-user"></i></a>
            </div>
            <a href="/logout" class="button">Logout</a>
        </div>
    </header>

    <div class="container">
        <div class="welcome-section">
            <h2 class="welcome-heading">Welcome, <%=username%>!</h2>
            <p class="welcome-message">Embark on a thrilling journey with TTRPGs, a portal to linguistic
                excellence through the magic of tabletop RPGs. Let the games begin!</p>
        </div>

        <div class="card-container">
            <div class="card">
                <h2>Group Dashboard</h2>
                <%if(typeof groups != 'undefined' && groups.length>0){%>
                    <p><strong>Group Name:</strong>
                        <select id="groupnames" onchange="changeProp()" onload="changeProp()">
                        <% for(let group of groups){ %>
                            <option value="<%=group.id%>"><%=group.name%></option>
                        <%}%>
                        </select>
                    </p>
                <%}else{%>
                    <p><strong>Not in a group? Join or create your own!</strong></p>

                <%}%>
                
                <div class="card-button">
                    <a style="margin-bottom:10px" id="link" href="/group" class="button" onclick="changeProp()"><%= typeof groups!='undefined' && groups.length>0 ? "View Group" : "Join or Create a Group"%></a>
                    <% if(typeof groups!='undefined' && groups.length>0){ %>
                        <a  href="/group" class="button">Join or Create a Group</a>
                    <%}%>
                </div>
            </div>

            <div class="card">
                <h2>Next Session</h2> 
                <!-- show these details if there is upcoming seesion is scheduled or just print "No Sessions/Meet-up Scheduled" Messege-->
                <%if(typeof groupName!='undefined' && typeof nextSession!='undefined' && typeof sessionToShow!='undefined'){%>
                    <p><strong>Group:</strong> <%=groupName.name%></p>
                    <p><strong>Date:</strong> <%=nextSession.substring(0,10)%></p>
                    <p><strong>Time:</strong> <%=nextSession.substring(11,16)%> </p>
                    <p><strong>Type:</strong> <%= sessionToShow.location.toLowerCase() == 'online' ? 'Online' : 'In-Person'%> </p>
                    <div class="card-button">
                        <a onload="test()" href="/sessions/<%=sessionToShow.id%>" class="button">View Session</a>
                        <script>
                         function test(){
                             console.log("ID to show: <%=sessionToShow.id%>");
                         }
                        </script>
                    </div>
                     <div class="card-button">
                         <a style="margin-top:10px" href="/createsession/" class="button">Create a Session</a>
                     </div>
                     
                <%}else{%>
                    <p><strong>No upcoming sessions? Try joining or creating a group!</strong></p>
                <%}%>
            </div>

            <div class="card">
                <h2>Language Level</h2>
                <div class="graph">
                    <%if(typeof level != 'undefined' && !Number.isNaN(level)){%>
                        <p>Grade <%=level%></p>
                    <%}else{%>
                        <p><strong>Make sure to upload transcripts of your sessions!</strong></p>
                    <%}%>
                </div>
                <!-- 
                <%if(typeof level != 'undefined' && !isNaN(level)){%>
                    <div class="card-button">
                        <a href="#" class="button">View Details</a>
                    </div>
                <%}%>
                -->

                
            </div>
        </div>
    </div>

</body>

</html>
